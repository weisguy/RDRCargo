var Popover=function(b,a){this.url=b,this.options=a,this.viewportwidth="",this.viewportheight="",this.showing=false;};var glossary=glossary||{Close:"Close",previous_image:"Previous Image",next_image:"Next Image"};
var websover={extraWidth:22,extraHeight:68,currentShadow:null,currentWrap:null,currentBorder:null,currentPopover:null,currentContent:null,garbageBin:null,imageToLoad:null,loadSrcTo:null,removeBadElements:function(){if(/msie|MSIE 6/.test(navigator.userAgent)){var b=document.getElementsByTagName("SELECT");
for(var a=0;a<b.length;a++){if(b[a].style.visibility=="hidden"){b[a].style.visibility="visible";}else{b[a].style.visibility="hidden";}}}var c=document.getElementsByTagName("IFRAME");
for(var a=0;a<c.length;a++){if(c[a].style.visibility=="hidden"){c[a].style.visibility="visible";}else{if(c[a].id!="websover_iframe"&&c[a].id!="documentarea"){c[a].style.visibility="hidden";
}}}},getTotalDocSize:function(){return Math.max((document.documentElement.scrollHeight||document.body.scrollHeight),(document.documentElement.offsetHeight||document.body.offsetHeight));
},hide:function(){websover.removeBadElements();websover.currentWrap.style.display="none";websover.currentShadow.style.display="none";if(websover.currentContent.tagName==="IFRAME"){websover.currentContent.src="javascript:false;";
websover.garbageBin.appendChild(websover.currentContent);websover.garbageBin.innerHTML="";}else{websover.currentContent.parentNode.removeChild(websover.currentContent);
}},changeIframeDest:function(b){var a=document.getElementById("websover_iframe");document.getElementById("websover_title").innerHTML=b.title;if(a){a.src=b.url;
}},checkScrolling:function(b,a){if(typeof b.scrolling!=="undefined"){if(b.scrolling===true){a.setAttribute("scrolling","auto");a.style.overflow="auto";
}else{if(b.scrolling===false){a.setAttribute("scrolling","no");a.style.overflow="hidden";}}}},changeHeading:function(b){var a=document.getElementById("websover_title");
if(a){a.innerHTML=b;}},resize:function(f){var b=document.getElementById("websover_iframe_container")||websover.currentContent,e=f.width?f.width:websover.width,c=f.height?f.height:websover.height,d=-parseInt((e+websover.extraWidth)/2),a=-parseInt((c+websover.extraHeight)/2);
if(typeof jQuery!="undefined"&&(typeof f.animation==="undefined")){if(typeof f.before!=="undefined"&&typeof f.before==="function"){f.before();}jQuery(websover.currentBorder).animate({top:a,left:d,width:e},500);
jQuery(websover.currentPopover).animate({width:e},500,function(){if(typeof f.after!=="undefined"&&typeof f.after==="function"){f.after();}websover.checkScrolling(f,b);
jQuery(b).fadeIn("fast");websover.reposition();});if(b.tagName!=="IMG"){jQuery(b).animate({height:c},500);}}else{if(typeof f.before!="undefined"&&typeof f.before=="function"){f.before();
}websover.currentBorder.style.top=a+"px";websover.currentBorder.style.left=d+"px";websover.currentBorder.style.width=e+"px";websover.currentPopover.style.width=e+"px";
if(b.tagName!=="IMG"){b.style.height=c+"px";}if(b.style.visibility==="hidden"){b.style.visibility="visible";}if(typeof f.after!="undefined"&&typeof f.after=="function"){f.after();
}websover.checkScrolling(f,b);b.style.display="block";websover.reposition();}websover.width=e;websover.height=c;},resizeImg:function(){var c=websover.imageToLoad.width||websover.imageToLoad.offsetWidth,a=websover.imageToLoad.height||websover.imageToLoad.offsetHeight,e=c<60||a<60?false:true;
if(e){var d=(typeof window.innerWidth!=="undefined"?window.innerWidth:document.documentElement.clientWidth),b=(typeof window.innerHeight!=="undefined"?window.innerHeight:document.documentElement.clientHeight);
websover.resize({width:c,height:a,scrolling:false,after:function(){websover.width=c;websover.height=a;websover.imageToLoad.style.position="static";websover.imageToLoad.style.visibility="visible";
if(websover.loadSrcTo){websover.loadSrcTo.style.visibility="visible";websover.loadSrcTo.src=websover.imageToLoad.src;}}});}else{setTimeout(websover.resizeImg,200);
}},reposition:function(){var b=(typeof window.innerHeight!="undefined"?window.innerHeight:document.documentElement.clientHeight);var a=(typeof window.pageYOffset!="undefined"?window.pageYOffset:document.documentElement.scrollTop);
if(b<websover.height+websover.extraHeight){websover.currentWrap.style.position="absolute";websover.currentWrap.style.top="0";websover.currentBorder.style.top=a+20+"px";
}else{websover.currentWrap.style.position="fixed";websover.currentWrap.style.top="50%";}},watchImgLoad:function(){if(/msie|MSIE 6/.test(navigator.userAgent)||/msie|MSIE 7/.test(navigator.userAgent)||/msie|MSIE 8/.test(navigator.userAgent)){if(websover.imageToLoad.complete!==null&&websover.imageToLoad.complete===true){websover.resizeImg();
}else{setTimeout(websover.resizeImg,200);}}else{websover.imageToLoad.onload=websover.resizeImg;}},initWatchImgLoad:function(a){websover.imageToLoad=document.createElement("img");
websover.imageToLoad.style.position="absolute";websover.imageToLoad.style.visibility="hidden";websover.imageToLoad.style.top="0px";websover.imageToLoad.style.left="0px";
websover.imageToLoad.src="";websover.watchImgLoad();websover.imageToLoad.src=a;if(websover.loadSrcTo){websover.loadSrcTo.style.visibility="hidden";}}};
Popover.prototype={show:function(){websover.removeBadElements();var c=this.options,m=(typeof c.scrolling!=="undefined"&&c.scrolling==true?"auto":"no");
websover.width=(c.width?c.width:100);websover.height=(c.height?c.height:100);if(typeof c.closeButton=="undefined"){c.closeButton=true;}if(websover.currentShadow===null){websover.currentShadow=document.createElement("div");
websover.currentShadow.setAttribute("id","websover_shadow");document.body.appendChild(websover.currentShadow);}websover.currentShadow.style.display="block";
if(websover.garbageBin===null){websover.garbageBin=document.createElement("div");websover.garbageBin.cssText="display: none;";document.body.appendChild(websover.garbageBin);
}if(websover.currentWrap===null){websover.currentWrap=document.createElement("div");websover.currentWrap.setAttribute("id","websover_wrap");if(typeof c.wrapperClasses!="undefined"){websover.currentWrap.setAttribute("className",c.wrapperClasses)||websover.currentWrap.setAttribute("class",c.wrapperClasses);
}document.body.appendChild(websover.currentWrap);}else{if(typeof c.wrapperClasses!="undefined"){websover.currentWrap.setAttribute("className",c.wrapperClasses)||websover.currentWrap.setAttribute("class",c.wrapperClasses);
}else{websover.currentWrap.setAttribute("className","")||websover.currentWrap.setAttribute("class","");}}if(websover.currentBorder===null){websover.currentBorder=document.createElement("div");
websover.currentBorder.setAttribute("id","websover_border");websover.currentWrap.appendChild(websover.currentBorder);}if(websover.currentPopover===null){websover.currentPopover=document.createElement("div");
websover.currentPopover.setAttribute("id","inner_websover");websover.currentBorder.appendChild(websover.currentPopover);}if(this.url instanceof Array||(typeof this.url==="object"&&c.type==="IMG")){var l=this.url;
if(l instanceof Array){if(typeof c.startIndex==="number"&&c.startIndex<l.length){l=l.splice(c.startIndex,l.length).concat(l);}var r=typeof c.loop==="boolean"&&c.loop?true:false;
if(c.type!=="IMG"){for(var n=0;n<l.length;n++){if(l[n].indexOf(".png")<0&&l[n].indexOf(".jpg")<0&&l[n].indexOf(".jpeg")<0&&l[n].indexOf(".gif")<0){l.splice(n,1);
}}}}if(!(this.url instanceof Array)){var k=[];for(var n=0;n<l.length;n++){if(l[n].tagName==="IMG"){k.push(l[n].src);}}l=k;}var b=document.createElement("div"),t=document.createElement("div"),s=document.createElement("img"),g=document.createElement("div"),f=document.createElement("a"),p=document.createElement("a");
b.setAttribute("id","websover_lightbox");t.setAttribute("id","websover_lightbox_container");s.setAttribute("id","websover_lightbox_image");g.setAttribute("id","websover_lightbox_nav");
f.setAttribute("id","websover_lightbox_prev");f.setAttribute("title",glossary.previous_image);f.setAttribute("href","#");f.setAttribute("onclick","return false");
f.innerHTML="<span>"+glossary.previous_image+"</span>";p.setAttribute("id","websover_lightbox_next");p.setAttribute("title",glossary.next_image);p.setAttribute("href","#");
p.setAttribute("onclick","return false");p.innerHTML="<span>"+glossary.next_image+"</span>";g.appendChild(f);g.appendChild(p);t.appendChild(s);t.appendChild(g);
b.appendChild(t);websover.currentContent=b;var a=0;var d=function(e){if(r){if(e===-1){e=l.length-1;}if(e===l.length){e=0;}a=e;}else{if(a===0){f.style.display="none";
}if(a===1){f.style.display="block";}if(a===l.length-2){p.style.display="block";}if(a===l.length-1){p.style.display="none";}}websover.loadSrcTo=s;websover.initWatchImgLoad(l[e]);
return false;};var j=function(i){return d(--a);};var o=function(i){return d(++a);};if(typeof addEventListener==="undefined"){f.attachEvent("onclick",j);
p.attachEvent("onclick",o);}else{f.addEventListener("click",j,false);p.addEventListener("click",o,false);}d(a);}else{if((typeof this.url.indexOf==="function"&&(this.url.indexOf(".png")>0||this.url.indexOf(".jpg")>0||this.url.indexOf(".jpeg")>0||this.url.indexOf(".gif")>0))||(typeof c.type!=="undefined"&&c.type==="IMG")){websover.initWatchImgLoad(this.url);
websover.currentContent=websover.imageToLoad;}else{if(typeof this.url=="string"){websover.currentContent=document.createElement("iframe");websover.currentContent.setAttribute("id","websover_iframe");
websover.currentContent.setAttribute("rel",this.url);websover.currentContent.setAttribute("name","popoverIframe");websover.currentContent.setAttribute("frameborder","0");
try{websover.currentContent.frameBorder=0;}catch(q){}websover.currentContent.setAttribute("scrolling",m);websover.currentContent.src=this.url;websover.currentContent.onload=function(){websover.currentContent.style.visibility="visible";
};websover.currentContent.style.cssText="visibility: hidden; "+(m==="no"?"overflow: hidden;":"overflow: auto;");}else{this.url.style.display="block";websover.currentContent=this.url;
websover.currentContent.className="websover_content";}}}websover.currentPopover.innerHTML='<div id="websover_header"><span id="websover_title">'+c.heading+"</span>"+(c.closeButton?'<a href="#" title="'+glossary.Close+'" id="websover_close" onclick="websover.hide(); return false;">'+glossary.Close+"</a>":"")+'</div><div id="websover_iframe_container"></div>';
websover.currentWrap.style.display="block";websover.currentPopover.style.width=websover.width+"px";websover.currentBorder.style.width=websover.width+"px";
websover.currentBorder.style.left=-parseInt((websover.width+websover.extraWidth)/2)+"px";websover.currentBorder.style.top=-parseInt((websover.height+websover.extraHeight)/2)+"px";
var h=document.getElementById("websover_iframe_container");if(typeof this.url=="string"){h.style.cssText="height: "+(websover.height-26)+"px";}h.appendChild(websover.currentContent);
if(websover.currentContent.tagName==="IFRAME"){window.setTimeout(function(){websover.currentContent.style.visibility="visible";},500);}else{if(websover.currentContent.tagName==="IMG"){}else{websover.resize({height:websover.currentContent.offsetHeight,width:websover.width});
websover.currentBorder.style.height="auto";}}if(document.getElementById("websover_close")){document.getElementById("websover_close").onclick=this.hide;
}this.showing=true;websover.reposition();return false;},hide:function(){if(typeof this.options!="undefined"&&this.options.onClose){this.options.onClose();
}websover.hide();this.showing=false;return false;}};