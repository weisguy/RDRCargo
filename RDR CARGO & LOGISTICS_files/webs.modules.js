define("webs.modules",["require","jquery","ModuleClassLoader","log","spine","tooltip"],function(a,b,c,d){var e=Spine.Controller.create({init:function(a){this.data=a.data},oneLoaded:function(){},trigger:function(){var a=Spine.makeArray(arguments),b=a.shift(),c,e,f,g;if(!(e=this.hasOwnProperty("_callbacks")&&this._callbacks))return!1;if(!(c=this._callbacks[b]))return!1;for(f=0,g=c.length;f<g;f++)try{if(c[f].apply(this,a)===!1)return!1}catch(h){d.trigger("Modules","error","Module:"+this.parent.slug+", Event:"+b,h)}return!0}}),f=e.create(),g=f.create(),h=e.create(),i=e.create(),j=e.create();return e.extend({styles:[]}),g.include({describeSubmodules:function(){var a=this,c=a.el.children(".webs-composite-module").eq(0),d=c.find(".webs-submodule"),e=[];return b.each(d,function(b){var f=d.eq(b);if(f.parents(".webs-composite-module")[0]===c[0]){var g=f.attr("webs-submodule-slug");e.push({name:g,el:f,slug:f.attr("webs-submodule-slug"),data:a.data[g]})}}),e},bindSubmodules:function(){var c=this,d=this.describeSubmodules();c.submoduleInstances={},b.each(d,function(b){var e=d[b];a("ModuleClassLoader").create(e.slug,{el:e.el,data:e.data}).done(function(a){c.submoduleInstances[e.name]=a,e.el.data("controller",a)})})},oneLoaded:function(){this.bindSubmodules(),b.each(this.submoduleInstances,function(a,b){b.oneLoaded()})}}),webs.modules={Module:e,CustomModule:f,IframeModule:i,WidgetModule:h,AppModule:j,CompositeModule:g},webs.modules})